<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.prime.com.tr/ui" xmlns:util="http://java.sun.com/jsf/composite/components/util" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/jsf/html		../../WEB-INF/schema/html-basic-2.0.2.xsd
						http://java.sun.com/jsf/core		../../WEB-INF/schema/jsf-core-2.0.2.xsd
						http://java.sun.com/jsf/facelets	../../WEB-INF/schema/facelets-ui-2.0.xsd
						http://primefaces.prime.com.tr/ui	../../WEB-INF/schema/primefaces-p-2.1.xsd">
	<div class="applicationDialog">
		<h:form id="adminGroupReservation" styleClass="applicationForm">
			<div class="applicationFormTitle">#{displayMessages.sectionsApplicationAdminGroupReservationDialogLabel}</div>
			<div class="applicationFormItem">
				<p:dataTable id="groupReservationTable" var="groupReservation" value="#{adminGroupReservationController.allGroupReservations}" paginator="true" rows="30" firstPageLinkLabel="&lt;&lt; #{displayMessages.componentDataTableFirstPageLinkLabel}" previousPageLinkLabel="&lt; #{displayMessages.componentDataTablePreviousPageLinkLabel}" nextPageLinkLabel="#{displayMessages.componentDataTableNextPageLinkLabel} &gt;" lastPageLinkLabel="#{displayMessages.componentDataTableLastPageLinkLabel} &gt;&gt;">  
					<p:column sortBy="#{groupReservation.groupReservationId}">
						<f:facet name="header"><h:outputText value="#{displayMessages.sectionsApplicationGroupReservationGroupReservationIdLabel}" /></f:facet>
						<h:outputText value="#{groupReservation.groupReservationId}" />
					</p:column>
					<p:column sortBy="#{groupReservation.arrival}">
						<f:facet name="header"><h:outputText value="#{displayMessages.sectionsApplicationGroupReservationArrivalLabel}" /></f:facet>
						<h:outputText value="#{groupReservation.arrival}">
							<f:convertDateTime locale="#{localeController.activeLocale}" pattern="#{localeController.activeDateFormatPattern}"/>
						</h:outputText>
					</p:column>
					<p:column sortBy="#{groupReservation.departure}">
						<f:facet name="header"><h:outputText value="#{displayMessages.sectionsApplicationGroupReservationDepartureLabel}" /></f:facet>
						<h:outputText value="#{groupReservation.departure}">
							<f:convertDateTime locale="#{localeController.activeLocale}" pattern="#{localeController.activeDateFormatPattern}"/>
						</h:outputText>
					</p:column>
					<p:column sortBy="#{groupReservation.guests}">
						<f:facet name="header"><h:outputText value="#{displayMessages.sectionsApplicationGroupReservationGuestsLabel}" /></f:facet>
						<h:outputText value="#{groupReservation.guests}" />
					</p:column>
					<p:column sortBy="#{groupReservation.beneficiary.username}">
						<f:facet name="header"><h:outputText value="#{displayMessages.sectionsApplicationGroupReservationAccountantLabel}" /></f:facet>
						<h:outputText value="#{groupReservation.beneficiary.username}" />
					</p:column>
					<p:column sortBy="#{groupReservation.accountant.username}">
						<f:facet name="header"><h:outputText value="#{displayMessages.sectionsApplicationGroupReservationBeneficiaryLabel}" /></f:facet>
						<h:outputText value="#{groupReservation.accountant.username}" />
					</p:column>
					<p:column>
						<!-- TODO display only for own reservations and admin user -->
						<f:facet name="header"><h:outputText value="#{displayMessages.sectionsApplicationActionLabel}" /></f:facet>
						<h:link outcome="editGroupReservation" value="#{displayMessages.sectionsApplicationEditGroupReservationLink}" styleClass="applicationLink">
							<f:param name="groupReservationId" value="#{groupReservation.groupReservationId}"/>
						</h:link>
						<h:outputText value="&#160;|&#160;" />
						<p:commandLink actionListener="#{adminGroupReservationController.setSelectedGroupReservationId}" action="#{adminGroupReservationController.deleteGroupReservation}" value="#{displayMessages.sectionsApplicationDeleteGroupReservationLink}" ajax="false" styleClass="applicationLink">
							<f:attribute name="#{adminGroupReservationController.commandLinkSelectedGroupReservationIdAttributeName}" value="#{groupReservation.groupReservationId}" />
						</p:commandLink>
					</p:column>				
				</p:dataTable>
			</div>
			<!-- TODO test links -->
			<div class="applicationFormItem">
				<p:commandLink value="#{displayMessages.sectionsApplicationExportCurrentGroupReservationsLink}" styleClass="applicationLink" ajax="false">
					<p:dataExporter type="xls" target="groupReservationTable" fileName="#{displayMessages.sectionsApplicationExportCurrentGroupReservationsFile}" pageOnly="true" excludeColumns="7"/>
				</p:commandLink>
				<h:outputText value="&#160;&#160;&#160;" />
				<p:commandLink value="#{displayMessages.sectionsApplicationExportAllGroupReservationsLink}" styleClass="applicationLink" ajax="false">
					<p:dataExporter type="xls" target="userTable" fileName="#{displayMessages.sectionsApplicationExportAllGroupReservationsFile}" excludeColumns="7"/>
				</p:commandLink>
			</div>
		</h:form>
	</div>  
</ui:composition>