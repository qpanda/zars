<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.prime.com.tr/ui" xmlns:util="http://java.sun.com/jsf/composite/components/util" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/jsf/html		../../WEB-INF/schema/html-basic-2.0.2.xsd
						http://java.sun.com/jsf/core		../../WEB-INF/schema/jsf-core-2.0.2.xsd
						http://java.sun.com/jsf/facelets	../../WEB-INF/schema/facelets-ui-2.0.xsd
						http://primefaces.prime.com.tr/ui	../../WEB-INF/schema/primefaces-p-2.1.xsd">
	<div class="applicationDialog">
		<h:form id="editGroupReservationForm" styleClass="applicationForm">
			<div class="applicationFormTitle">#{displayMessages.sectionsApplicationEditGroupReservationDialogLabel}</div>
			<div class="applicationFormItem">		
				<h:outputLabel for="arrival" styleClass="applicationFormLabel" value="#{displayMessages.sectionsApplicationGroupReservationArrivalLabel}" /><br />
				<p:calendar id="arrival" inputStyleClass="applicationFormInput" value="#{editGroupReservationController.arrival}" binding="#{editGroupReservationController.arrivalCalendar}" mode="popup" showOn="button" popupIconOnly="true" locale="#{localeController.activeLocale}" pattern="#{localeController.activeDateFormatPattern}" readOnlyInputText="true"/>
				<p:message for="arrival" />
			</div>
			<div class="applicationFormItem">		
				<h:outputLabel for="departure" styleClass="applicationFormLabel" value="#{displayMessages.sectionsApplicationGroupReservationDepartureLabel}" /><br />
				<p:calendar id="departure" inputStyleClass="applicationFormInput" value="#{editGroupReservationController.departure}" binding="#{editGroupReservationController.departureCalendar}" mode="popup" showOn="button" popupIconOnly="true" locale="#{localeController.activeLocale}" pattern="#{localeController.activeDateFormatPattern}" readOnlyInputText="true"/>
				<p:message for="departure" />
			</div>
			<div class="applicationFormItem">		
				<h:outputLabel for="guests" styleClass="applicationFormLabel" value="#{displayMessages.sectionsApplicationGroupReservationGuestsLabel}" /><br />
				<h:inputText id="guests" styleClass="applicationFormInput" value="#{editGroupReservationController.guests}" binding="#{editGroupReservationController.guestsInputText}" size="3" />
				<p:message for="guests" />
			</div>
			<div class="applicationFormItem">		
				<h:outputLabel for="accountant" styleClass="applicationFormLabel" value="#{displayMessages.sectionsApplicationGroupReservationAccountantLabel}" /><br />
				<h:selectOneMenu id="accountant" styleClass="applicationFormInput" value="#{editGroupReservationController.selectedAccountantId}" converter="javax.faces.Long" required="true" requiredMessage="#{validationMessages.sectionsApplicationGroupReservationAccountantError}">
					<f:selectItems value="#{editGroupReservationController.availableAccountants}" var="accountant" itemLabel="#{accountant.username} (#{accountant.emailAddress})" itemValue="#{accountant.userId}"/>
				</h:selectOneMenu>
				<p:message for="accountant" />
			</div>
			<div class="applicationFormItem">		
				<h:outputLabel for="comment" styleClass="applicationFormLabel" value="#{displayMessages.sectionsApplicationGroupReservationCommentLabel}" />
				<p:message for="comment" />
				<br />
				<h:inputTextarea id="comment" styleClass="applicationFormInput" value="#{editGroupReservationController.comment}" rows="3" cols="80" />				
			</div>
			<div class="applicationFormSeparator"/>
			<!-- TODO use i18n messages and revise -->
			<div class="applicationFormItem">
				<h:outputLabel for="reservations" styleClass="applicationFormLabel" value="#{displayMessages.sectionsApplicationGroupReservationReservationLabel}" /><br />
				<h:panelGrid id="reservations" styleClass="applicationFormDialog" binding="#{editGroupReservationController.reservationPanelGrid}" columns="4">
					<h:outputText id="arrivalHeader" styleClass="applicationFormLabel" value="Arrival" rendered="#{editGroupReservationController.reservationPanelGrid.childCount &gt; editGroupReservationController.reservationPanelGrid.columns}" />
					<h:outputText id="departureHeader" styleClass="applicationFormLabel" value="Depature" rendered="#{editGroupReservationController.reservationPanelGrid.childCount &gt; editGroupReservationController.reservationPanelGrid.columns}" />
					<h:outputText id="firstNameHeader" styleClass="applicationFormLabel" value="First Name" rendered="#{editGroupReservationController.reservationPanelGrid.childCount &gt; editGroupReservationController.reservationPanelGrid.columns}" />
					<h:outputText id="lastNameHeader" styleClass="applicationFormLabel" value="Last Name" rendered="#{editGroupReservationController.reservationPanelGrid.childCount &gt; editGroupReservationController.reservationPanelGrid.columns}" />
					<f:facet name="footer">
						<h:panelGroup>							
							<p:commandLink actionListener="#{editGroupReservationController.addReservation}" value="Add Reservation" immediate="true" update="arrival, departure, guests, reservations" styleClass="applicationLink"/>
							<h:outputText value="&#160;&#160;&#160;" />
							<p:commandLink actionListener="#{editGroupReservationController.removeReservation}" value="Remove Reservation" immediate="true" update="arrival, departure, guests, reservations" styleClass="applicationLink"/>													
						</h:panelGroup>
					</f:facet>					
				</h:panelGrid>				
			</div>
			<div class="applicationFormItem">
				<h:commandButton id="editGroupReservationAction" type="submit" action="#{editGroupReservationController.create}" styleClass="applicationFormButton" value="#{displayMessages.sectionsApplicationAddGroupReservationCreateButton}"/>
			</div>
		</h:form>
	</div>
	<p:messages globalOnly="false" redisplay="false"/>
</ui:composition>